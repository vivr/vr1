<!-- Contact Modal -->
<div id="contactModal" class="modal" aria-hidden="true">
  <div class="modal-overlay" id="closeContactModalOverlay"></div>

  <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="contactModalTitle">
    <button
      type="button"
      class="modal-close"
      id="closeContactModal"
      aria-label="Close contact form"
    >
      Ã—
    </button>

    <h2 id="contactModalTitle">Send me a message</h2>

    <!-- Netlify form -->
    <form
      name="contact"
      method="POST"
      data-netlify="true"
      netlify-honeypot="contact-check"
      action="/thanks/"
    >
      <!-- Netlify requires this hidden field -->
      <input type="hidden" name="form-name" value="contact">

      <!-- Cleaner Honeypot -->
      <div class="visually-hidden" aria-hidden="true">
        <label for="contact-check">Leave this field blank</label>
        <input id="contact-check" name="contact-check" type="text" autocomplete="off">
      </div>

      <div class="form-group">
        <label for="contact-name">Your name</label>
        <input id="contact-name" name="name" type="text" required>
      </div>

      <div class="form-group">
        <label for="contact-email">Your email</label>
        <input id="contact-email" name="email" type="email" required>
      </div>

      <div class="form-group">
        <label for="contact-message">Your message</label>
        <textarea id="contact-message" name="message" rows="5" required></textarea>
      </div>

      <button type="submit" class="contact-submit">
        Send
      </button>
    </form>
  </div>
</div>

<script>
  (function () {
    var openBtn = document.getElementById('openContactModal');
    var modal = document.getElementById('contactModal');
    var closeBtn = document.getElementById('closeContactModal');
    var overlay = document.getElementById('closeContactModalOverlay');

    if (!openBtn || !modal) return;

    function openModal() {
      modal.classList.add('is-visible');
      modal.setAttribute('aria-hidden', 'false');

      var nameField = document.getElementById('contact-name');
      if (nameField) {
        nameField.focus();
      }
    }

    function closeModal() {
      modal.classList.remove('is-visible');
      modal.setAttribute('aria-hidden', 'true');
      openBtn.focus();
    }

    openBtn.addEventListener('click', function (event) {
      event.preventDefault(); /* stops the # from jumping to the top */
      openModal();
    });

    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);

    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape' && modal.classList.contains('is-visible')) {
        closeModal();
      }
    });
  })();
</script>
